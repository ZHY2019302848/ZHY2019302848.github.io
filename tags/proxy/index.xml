<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>proxy on ZHY の blog</title><link>https://ZHY2019302848.github.io/tags/proxy/</link><description>Recent content in proxy on ZHY の blog</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><copyright>ZHY</copyright><lastBuildDate>Fri, 10 Nov 2023 15:34:23 +0800</lastBuildDate><atom:link href="https://ZHY2019302848.github.io/tags/proxy/index.xml" rel="self" type="application/rss+xml"/><item><title>服务器网络问题解决方案</title><link>https://ZHY2019302848.github.io/p/linux-network/</link><pubDate>Fri, 10 Nov 2023 15:34:23 +0800</pubDate><guid>https://ZHY2019302848.github.io/p/linux-network/</guid><description>&lt;img src="https://ZHY2019302848.github.io/p/linux-network/linux_network.jpg" alt="Featured image of post 服务器网络问题解决方案" />&lt;h1 id="对服务器网络问题的总结">对服务器网络问题的总结&lt;/h1>
&lt;p>最近使用实验室linux服务器跑代码，对其中频繁出现的网络问题烦不胜烦，诸如git和pip问题层出不穷，其中的问题不是简单换一个清华源可以，根源性需要让服务器走&lt;strong>中转代理&lt;/strong>，实现完全性&lt;strong>翻墙&lt;/strong>。&lt;/p>
&lt;p>现在把其中常见的命令总结如下，方便以后快捷使用。&lt;/p>
&lt;h2 id="git的代理设置">git的代理设置&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">git config --global http.proxy socks5 127.0.0.1:7890 &lt;span class="c1">#端口号参考clash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git config --global https.proxy socks5 127.0.0.1:7890 &lt;span class="c1">#端口前面的ip地址参考开clash的主机ip&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git config --global https.proxy 127.0.0.1:7890
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git config --global https.proxy 127.0.0.1:7890
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果报错提示不让写入修改，在最后加入&lt;code>--replace-all&lt;/code>，代码如下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">git config --global https.proxy 127.0.0.1:7890 --replace-all
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git config --global https.proxy 127.0.0.1:7890 --replace-all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="服务器全局设置">服务器全局设置&lt;/h2>
&lt;p>考虑到有些工具无法设置代理，所以使用全局代理，但这种方式在针对ICMP协议时会失效，因为使用的代理走的都是会话层，无法影响到ip报文解包的结果。&lt;/p>
&lt;p>代码如下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">proxy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;http://127.0.0.1:7890&amp;#34;&lt;/span> &lt;span class="c1">##ip和端口地址按情况替换&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">https_proxy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$proxy&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">http_proxy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$proxy&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="效果">效果&lt;/h2>
&lt;p>可以让torch的安装速度从几百k涨到最高10mb/s。&lt;/p>
&lt;p>&lt;em>备注&lt;/em>&lt;/p>
&lt;p>如果无法正常部署博客到github.io，请检查标题里是不是把草稿draft设置为了true，之后再运行如下命令&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">hugo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hugo --gc --minify --cleanDestinationDir
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item></channel></rss>